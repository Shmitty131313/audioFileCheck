gem 'awesome_print', :require => 'ap'
require 'nokogiri'
require 'open-uri'

#list of program urls to run through
%w[
http://www.moodyradio.org/brd_podcast.aspx?Program=ALoveLanguageMinute
http://www.moodyradio.org/brd_podcast.aspx?Program=AuthenticIntimacy
http://www.moodyradio.org/brd_podcast.aspx?Program=BringToMind
http://www.moodyradio.org/brd_podcast.aspx?Program=BuildingRelationships
http://www.moodyradio.org/brd_podcast.aspx?Program=ChrisFabryLive
http://www.moodyradio.org/brd_podcast.aspx?Program=IntheMarketwithJanetParshall
http://www.moodyradio.org/brd_podcast.aspx?Program=JanetParshallCommentary
http://www.moodyradio.org/brd_podcast.aspx?Program=JavaWithJuli
http://www.moodyradio.org/brd_podcast.aspx?Program=TheLandandtheBook
http://www.moodyradio.org/brd_podcast.aspx?Program=LivingALegacy
http://www.moodyradio.org/brd_podcast.aspx?Program=MiddayConnection
http://www.moodyradio.org/brd_podcast.aspx?Program=MoodyPresents
http://www.moodyradio.org/brd_podcast.aspx?Program=OpenLine
http://www.moodyradio.org/brd_podcast.aspx?Program=RadicalWithDavidPlatt
http://www.moodyradio.org/brd_podcast.aspx?Program=ThisIsTheDay
http://www.moodyradio.org/brd_podcast.aspx?Program=TodayintheWord
http://www.moodyradio.org/brd_podcast.aspx?Program=TreasuredTruth
http://www.moodyradio.org/brd_podcast.aspx?Program=UpforDebate
http://www.moodyradio.org/brd_podcast.aspx?Program=WhatDidTheySayNow
].each do |url|

# Grab xml url file
xml = Nokogiri::XML(open(url))

# Use css tags to search through doc for Program episode and information
channel =xml.search('channel').map do |channel|
  %w[
    title
  ].each_with_object({}) do |n, o|
    o[n] = channel.at(n)
    end
  end
item = xml.search('item').map do |item|
  %w[
    title link pubDate
  ].each_with_object({}) do |n, o|
    o[n] = item.at(n)
  end
end
# Print out results
require 'awesome_print'
ap channel
ap item[0]
ap item[1]

  end
